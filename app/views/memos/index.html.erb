<%= render 'headfoot/header' %>

<% if flash[:notice] %>
  <div class="flash">
    <%= flash[:notice] %>
  </div>
<% end %>

<% if @newmemo.errors.any? %>
      <h2><%= @newmemo.errors.count %> errors prohibited this memo from being saved:</h2>

      <ul>
      <% @newmemo.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
<% end %>

<div class="container">
  <div class="row">
    <div class="col-xs-4">
      <%= render 'memos/new', user: current_user %>
    </div>

    <div class="col-xs-8">
      <h2>全投稿一覧</h2>

      <br>

      <div>

      </div>

      <br>

      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>カテゴリー</th>
            <th>タイトル</th>
            <th>内容詳細</th>
            <th><span class="glyphicon glyphicon-heart" aria-hidden="true" style="color: red;"></span></th>
          </tr>
        </thead>

        <tbody>
          <% @memos.each do |memo| %>
            <tr>
              <td></td>
              <td>
                <%= memo.category %>
              </td>
              <td>
                <%= link_to memo_path(memo.id) do %>
                  <%= memo.title %>
                <% end %>
              </td>
              <td>
                <%= memo.body %>
              </td>
              <td>
                <% if memo.favorited_by?(current_user) %>
                  <%= link_to memo_favorites_path(memo), method: :delete do %>
                    <span class="glyphicon glyphicon-heart" aria-hidden="true" style="color: red;"></span>
                  <% end %>
                <% else %>
                  <%= link_to memo_favorites_path(memo), method: :post do %>
                    <span class="glyphicon glyphicon-heart" aria-hidden="true" style="color: gray;"></span>
                  <% end %>
                <% end %>
                <%= memo.favorites.count %> イイね！
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <%= render 'headfoot/footer' %>
</div>